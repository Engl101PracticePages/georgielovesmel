<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Georgie Loves Mel</title>

<style>
:root{
--bg:#f6f8ff;
--card:#ffffff;
--ink:#0f172a;
--muted:#475569;
--line:#dbe3f0;
--accent:#192689;
--accent2:#2b3aa8;
--danger:#b42318;
--good:#067647;
--shadow:0 14px 30px rgba(0,0,0,.08);
--focus:3px solid rgba(25,38,137,.55);
--radius:18px;
--base:19px;
}

@media (prefers-color-scheme: dark){
:root{
--bg:#0b1020;
--card:#101a33;
--ink:#eef2ff;
--muted:#c7d2fe;
--line:#243055;
--accent:#8aa4ff;
--accent2:#a7b8ff;
--shadow:0 14px 30px rgba(0,0,0,.35);
--focus:3px solid rgba(138,164,255,.6);
}
}

html{font-size:var(--base);}
body{
margin:0;
font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
background:var(--bg);
color:var(--ink);
}

.wrap{
max-width:900px;
margin:auto;
padding:30px 20px;
}

.card{
background:var(--card);
border:1px solid var(--line);
border-radius:var(--radius);
box-shadow:var(--shadow);
padding:20px;
margin-top:15px;
}

button{
font:inherit;
border-radius:14px;
border:1px solid var(--line);
background:var(--card);
color:var(--ink);
padding:12px 16px;
cursor:pointer;
margin-right:10px;
}

button.primary{
background:var(--accent);
color:white;
border:none;
}

.result{
font-size:1.4rem;
margin-top:10px;
}

.small{
color:var(--muted);
margin-top:10px;
}

a{color:var(--accent);}
</style>
</head>

<body>

<div class="wrap">

<div class="card">

<h1>Hi Mel. This is our little dinner oracle.</h1>

<button class="primary" onclick="pick('food')">Pick food</button>
<button class="primary" onclick="pick('dessert')">Pick dessert</button>
<button onclick="pick('either')">Either</button>
<button onclick="pick(lastMode)">Reroll</button>

<div class="result" id="result">No pick yet.</div>

<div class="small" id="status"></div>

</div>

<div class="card">
<a href="./add.html">Add a place</a>
</div>

</div>

<script>

let restaurants=[];
let lastMode="either";

async function load(){
try{
let res=await fetch("restaurants.json");
let data=await res.json();
restaurants=data.restaurants;
}catch(e){
document.getElementById("status").innerText="No restaurants yet. Add some first.";
}
}

function pick(mode){

lastMode=mode;

let pool=restaurants.filter(r=>{
if(mode==="either")return true;
return r.category===mode;
});

if(pool.length===0){
document.getElementById("result").innerText="No matches.";
return;
}

let r=pool[Math.floor(Math.random()*pool.length)];

document.getElementById("result").innerHTML=
'<a href="'+(r.google_maps_url||r.url||"#")+'" target="_blank">'+r.name+'</a>';

}

load();

</script>

</body>
</html>
